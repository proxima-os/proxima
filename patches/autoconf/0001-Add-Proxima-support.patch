From fea0a7ff33fd414e84e4476fa68e6a80f90b260c Mon Sep 17 00:00:00 2001
From: monkuous <84319635+monkuous@users.noreply.github.com>
Date: Fri, 16 May 2025 12:00:21 +0200
Subject: [PATCH] Add Proxima support

---
 build-aux/config.guess |  3 +++
 build-aux/config.sub   | 12 +++++++++---
 2 files changed, 12 insertions(+), 3 deletions(-)

diff --git a/build-aux/config.guess b/build-aux/config.guess
index cdfc439..92b058d 100755
--- a/build-aux/config.guess
+++ b/build-aux/config.guess
@@ -979,6 +979,9 @@ EOF
     *:Minix:*:*)
 	GUESS=$UNAME_MACHINE-unknown-minix
 	;;
+    *:Hydrogen:*:*)
+	GUESS="$UNAME_MACHINE-unknown-hydrogen-plibc"
+	;;
     aarch64:Linux:*:*)
 	set_cc_for_build
 	CPU=$UNAME_MACHINE
diff --git a/build-aux/config.sub b/build-aux/config.sub
index defe52c..effdc0a 100755
--- a/build-aux/config.sub
+++ b/build-aux/config.sub
@@ -146,7 +146,7 @@ case $1 in
 			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
 			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
 			| storm-chaos* | os2-emx* | rtmk-nova* | managarm-* \
-			| windows-* )
+			| windows-* | hydrogen-* )
 				basic_machine=$field1
 				basic_os=$maybe_os
 				;;
@@ -1325,6 +1325,10 @@ EOF
 		kernel=managarm
 		os=`echo "$basic_os" | sed -e 's|managarm|mlibc|'`
 		;;
+	hydrogen*)
+		kernel=hydrogen
+		os=`echo "$basic_os" | sed -e 's|hydrogen|plibc|'`
+		;;
 	*)
 		kernel=
 		os=$basic_os
@@ -1766,7 +1770,7 @@ case $os in
 	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
 	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
 	     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx* | zephyr* \
-	     | fiwix* | mlibc* | cos* | mbr* )
+	     | fiwix* | mlibc* | cos* | mbr* | plibc* )
 		;;
 	# This one is extra strict with allowed versions
 	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
@@ -1825,9 +1829,11 @@ case $kernel-$os-$obj in
 		;;
 	managarm-mlibc*- | managarm-kernel*- )
 		;;
+	hydrogen-plibc*-)
+		;;
 	windows*-msvc*-)
 		;;
-	-dietlibc*- | -newlib*- | -musl*- | -relibc*- | -uclibc*- | -mlibc*- )
+	-dietlibc*- | -newlib*- | -musl*- | -relibc*- | -uclibc*- | -mlibc*- | -plibc*- )
 		# These are just libc implementations, not actual OSes, and thus
 		# require a kernel.
 		echo "Invalid configuration '$1': libc '$os' needs explicit kernel." 1>&2
-- 
2.49.0

